{"version":3,"sources":["../src/salita.js"],"names":[],"mappings":"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","file":"salita.esm.js","sourcesContent":["const path = require('path');\nconst npm = require('npm');\nconst jsonFile = require('json-file-plus');\nconst Table = require('cli-table');\nconst chalk = require('chalk');\nconst semver = require('semver');\n\nconst deps = {\n  dependencies: {section: 'dep', title: 'Dependencies'},\n  devDependencies: {section: 'dev', title: 'Development Dependencies'},\n  peerDependencies: {section: 'peer', title: 'Peer Dependencies'},\n};\n\n/**\n * @param {object} tableChars - Table options chars.\n * @param {string} key - Char key.\n * @returns {object} Table options chars.\n */\nconst charsIteratee = function charsIteratee(tableChars, key) {\n  tableChars[key] = '';\n\n  return tableChars;\n};\n\n/**\n * @returns {Table} The CLI table.\n */\nconst getTable = function getTable() {\n  const table = new Table({});\n\n  table.options.chars = Object.keys(table.options.chars).reduce(charsIteratee, {});\n\n  return table;\n};\n\n/**\n * @param {string} key - The section name.\n * @param {boolean} onlyChanged - Only changed option.\n * @returns {function(*): object} The bound result to JSON function.\n */\nconst createResultJSON = function createResultJSON(key, onlyChanged) {\n  const predicate = function predicate(result) {\n    return !onlyChanged || result.isChanged;\n  };\n\n  return function resultJSON(results) {\n    return {\n      [key]: results.filter(predicate),\n    };\n  };\n};\n\n/**\n * @param {string} message - Message in chalk colour.\n * @param {object} result - Package result.\n * @returns {Array<string>} - Row message array.\n */\nconst getRowFromTo = function getRowFromTo(message, result) {\n  return [message, result.name, 'from', chalk.yellow(result.before), 'to', chalk.yellow(result.after)];\n};\n\n/**\n * @param {string} message - Message in chalk colour.\n * @param {object} result - Package result.\n * @returns {Array<string>} - Row message array.\n */\nconst getRowAt = function getRowAt(message, result) {\n  return [message, result.name, 'at', chalk.yellow(result.before)];\n};\n\n/**\n * @param {object} result - Package result.\n * @returns {boolean} Indicates if the range is satisfied.\n */\nconst isRangeSatisfied = function isRangeSatisfied(result) {\n  return result.isUpdatable || result.isStar || result.isPegged;\n};\n\n/**\n * @param {boolean} onlyChanged - Only changed option.\n * @returns {function(object): Array<string>} - Row iteratee.\n */\nconst createRowIteratee = function createRowIteratee(onlyChanged) {\n  return function rowIteratee(result) {\n    if (result.isChanged) {\n      return getRowFromTo(chalk.green('Changed: '), result);\n    }\n\n    if (result.error) {\n      return [...getRowAt(chalk.red('Package not found: '), result), chalk.bold.red('?')];\n    }\n\n    if (!isRangeSatisfied(result)) {\n      return getRowFromTo(chalk.red('Requested range not satisfied by: '), result);\n    }\n\n    return onlyChanged ? null : getRowAt(chalk.blue('Kept: '), result);\n  };\n};\n\n/**\n * @param {Array<string>} a - Reference element.\n * @param {Array<string>} b - Compare element.\n * @returns {number} A -1 if a before b; 1 if a after b; 0 if they are equivalent.\n */\nconst sortByName = function sortByName(a, b) {\n  return a[1].localeCompare(b[1]);\n};\n\n/**\n * @param {string} caption - Section caption.\n * @param {boolean} onlyChanged - Only changed options.\n * @returns {function(Array<object>): [string, Table]} The array of chalked caption and CLI table.\n */\nconst createResultTable = function createResultTable(caption, onlyChanged) {\n  return function resultTable(results) {\n    const table = getTable();\n\n    if (results.length > 0) {\n      const tableRows = results.map(createRowIteratee(onlyChanged)).filter(Boolean);\n\n      table.push(...tableRows);\n      table.sort(sortByName);\n    } else {\n      table.push([chalk.gray('None found')]);\n    }\n\n    return [chalk.green.underline(`${caption}:`), table];\n  };\n};\n\n/**\n * @param {object} pkg - The package.json object.\n * @returns {Promise<object>} The package.json object.\n */\nconst loadNPM = function loadNPM(pkg) {\n  return new Promise(function executee(resolve, reject) {\n    npm.load({}, function callback(err, result) {\n      if (err) {\n        reject(err);\n      } else {\n        resolve(result);\n      }\n    });\n  }).then(function thenee() {\n    return pkg;\n  });\n};\n\n/**\n * @param {string} version - The package version.\n * @returns {boolean} Indicate if the version is pegged or not.\n */\nconst isVersionPegged = function isVersionPegged(version) {\n  try {\n    /* eslint-disable-next-line babel/new-cap */\n    const range = semver.Range(version);\n\n    return range.set.every(function predicate(comparators) {\n      return comparators.length === 1 && String(comparators[0].operator || '') === '';\n    });\n  } catch (err) {\n    /*\n     * semver.Range doesn't support all version specifications (like git\n     * references), so if it raises an error, assume the dep can be left\n     * untouched:\n     */\n    return true;\n  }\n};\n\n/**\n * Given a package name, lookup the semantic tags.\n *\n * @param {string} name - The module name.\n * @param {Function} callback - A function to call with the dist tags.\n */\nconst lookupDistTags = function lookupDistTags(name, callback) {\n  // Need to require here, because NPM does all sorts of funky global attaching.\n  /* eslint-disable-next-line global-require */\n  const view = require('npm/lib/view');\n  const prefix = npm.config.get('save-prefix');\n\n  // Call View directly to ensure the arguments actually work.\n  view([name, 'dist-tags'], true, function cb(err, desc) {\n    if (err) {\n      return callback(err);\n    }\n\n    const latest = Object.keys(desc);\n\n    if (latest.length !== 1) {\n      throw new Error(`expected 1 version key, got: ${latest}`);\n    }\n\n    const tags = desc[latest]['dist-tags'];\n\n    return callback(null, prefix, tags);\n  });\n};\n\n/**\n * @param {string} existing - The existing package version from package.json file.\n * @param {string} version - The package version from update check.\n * @returns {boolean} Indicates if the package is updatable or not.\n */\nconst getIsUpdatable = function getIsUpdatable(existing, version) {\n  try {\n    /* eslint-disable-next-line babel/new-cap */\n    const range = semver.Range(existing);\n\n    return !semver.ltr(version, range);\n  } catch (e) {\n    return false;\n  }\n};\n\n/**\n * @param {{name: string, version: string}} pkg - The package details.\n * @param {object} flags - Ignore flags.\n * @returns {Promise<object>} A promise that resolves to an untouched object.\n */\nconst createUntouched = function createUntouched(pkg, flags) {\n  const {name, version} = pkg;\n\n  return Promise.resolve({\n    ...{\n      after: version,\n      before: version,\n      isChanged: false,\n      isUpdatable: false,\n      name,\n    },\n    ...flags,\n  });\n};\n\n/**\n * @param {string} version - The package version.\n * @returns {boolean} Indicates if it is star or not.\n */\nconst isVersionStar = function isVersionStar(version) {\n  return version === '*' || version === 'latest';\n};\n\n/**\n * @param {{names: Array<string>, section: object}} data - The names array and package.json section.\n * @param {{stars: boolean, pegged: boolean}} ignore - Ignore options.\n * @returns {{names: Array<string>, untouched: Array<Promise<object>>}} The filtered names and untouched objects.\n */\nconst reduceNamesAndUntouched = function reduceNamesAndUntouched({names, section}, {stars, pegged}) {\n  const predicate = function predicate(filterObject, name) {\n    const version = section[name];\n\n    if (stars && isVersionStar(version)) {\n      filterObject.untouched.push(createUntouched({name, version}, {isStar: true}));\n    } else if (pegged && isVersionPegged(version)) {\n      filterObject.untouched.push(createUntouched({name, version}, {isPegged: true}));\n    } else {\n      filterObject.names.push(name);\n    }\n\n    return filterObject;\n  };\n\n  return names.reduce(predicate, {names: [], untouched: []});\n};\n\n/**\n * @param {object} section - The section object.\n * @param {{stars: boolean, pegged: boolean}} ignore - Ignore options.\n * @returns {{names: Array<string>, untouched: Array<Promise<object>>}} The object of promise arrays.\n */\nconst getNamesAndUntouched = function getNamesAndUntouched(section, {stars, pegged}) {\n  const names = Object.keys(section);\n\n  if (stars || pegged) {\n    return reduceNamesAndUntouched({names, section}, {stars, pegged});\n  }\n\n  return {names, untouched: []};\n};\n\n/**\n * CreateDependenciesLookup.\n *\n * @param {object} section - The package.json section object.\n * @param {{stars: boolean, pegged: boolean}} ignore - Ignore options.\n * @returns {Array<Promise<object>>}\n */\nconst dependenciesLookup = function dependenciesLookup(section, ignore) {\n  // See if any dependencies of this type exist.\n  if (!section || !Object.keys(section).length) {\n    return [];\n  }\n\n  // Loop through and map the \"lookup latest\" to promises.\n  const {names, untouched} = getNamesAndUntouched(section, ignore);\n\n  const mapNameToLatest = function mapNameToLatest(name) {\n    return new Promise(function executee(resolve) {\n      lookupDistTags(name, function callback(error, prefix, distTags) {\n        const existing = section[name];\n\n        if (error) {\n          return resolve({\n            after: existing,\n            before: existing,\n            error,\n            isChanged: false,\n            isUpdatable: false,\n            name,\n          });\n        }\n\n        const version = distTags.latest;\n        const isUpdatable = getIsUpdatable(existing, version);\n        const updated = prefix + version;\n        // If there is no version or the version is the latest.\n        const result = {\n          after: updated,\n          before: existing,\n          isChanged: version !== null && isUpdatable && existing !== updated,\n          isUpdatable,\n          name,\n        };\n\n        if (result.isChanged) {\n          // Actually write to the package descriptor.\n          section[name] = updated;\n        }\n\n        return resolve(result);\n      });\n    });\n  };\n\n  return names.map(mapNameToLatest).concat(untouched);\n};\n\n/**\n * @param {function(Array<object>): Array<number>} fn - The function to execute on resolve.\n * @returns {function(Promise<object>): (Promise<Array<number>>)} - Promise of result lengths.\n */\nconst createMapThen = function createMapThen(fn) {\n  return function mapThen(promise) {\n    return promise.then(fn);\n  };\n};\n\n/**\n * @param results\n * @returns {[*, *]}\n */\nconst getDepCounts = function getDepCounts(results) {\n  const changedDeps = results.filter(function iteratee({isChanged}) {\n    return isChanged;\n  }).length;\n\n  return [results.length, changedDeps];\n};\n\n/**\n * @param data\n * @param options\n * @returns {{lookups: [], promises: []}}\n */\nconst getDepPromises = function getDepPromises({data}, options) {\n  const {sections, json, 'only-changed': onlyChanged, 'ignore-stars': ignoreStars, 'ignore-pegged': ignorePegged} = options;\n\n  return Object.keys(deps).reduce(\n    function iteratee(promisesObject, key) {\n      const {section, title} = deps[key];\n\n      if (sections.indexOf(section) !== -1) {\n        const depLookup = Promise.all(dependenciesLookup(data[key], {stars: ignoreStars, pegged: ignorePegged}));\n        promisesObject.lookups.push(depLookup);\n\n        const create = json ? createResultJSON(key, onlyChanged) : createResultTable(title, onlyChanged);\n        promisesObject.promises.push(depLookup.then(create));\n      }\n\n      return promisesObject;\n    },\n    {lookups: [], promises: []},\n  );\n};\n\n/**\n * The main entry point.\n */\nconst salita = function salita(dir, options, callback) {\n  // Package.json.\n  const filename = path.join(dir, 'package.json');\n  jsonFile(filename)\n    .then(loadNPM)\n    .then(function thenee(pkg) {\n      if (pkg && !options.json) {\n        console.log('Found package.json.');\n      }\n\n      const dep = getDepPromises(pkg, options);\n\n      // Wait for all of them to resolve.\n      Promise.all(dep.promises).then(function theneeAll(depResults) {\n        if (options.json) {\n          console.log(JSON.stringify(Object.assign.apply(null, [{}].concat(depResults)), null, 2));\n        } else {\n          depResults.forEach(function outerIteratee(results) {\n            results.map(String).forEach(function innerIteratee(result) {\n              console.log(result);\n            });\n          });\n        }\n\n        const counts = Promise.all(dep.lookups.map(createMapThen(getDepCounts)));\n\n        // Write back the package.json.\n        if (options['dry-run']) {\n          return callback(counts);\n        }\n\n        return pkg.save(callback.bind(null, counts));\n      });\n    })\n    .done();\n};\n\nObject.defineProperty(salita, 'sections', {\n  enumerable: true,\n  value: Object.keys(deps).map(function iteratee(key) {\n    return deps[key].section;\n  }),\n});\n\nif (Object.freeze) {\n  Object.freeze(salita.sections);\n}\n\nmodule.exports = salita;\n"]}