{"version":3,"sources":["../src/salita.js"],"names":[],"mappings":"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","file":"salita.esm.js","sourcesContent":["import path from 'path';\nimport npm from 'npm';\nimport jsonFilePlus from 'json-file-plus';\nimport Table from 'cli-table';\nimport chalk from 'chalk';\nimport semver from 'semver';\n\n/**\n * @typedef {object} PackagePlus\n * @property {object} data\n * @property {object} format\n * @property {Function} get\n * @property {Function} set\n * @property {Function} remove\n * @property {string} filename\n * @property {Function} save\n * @property {Function} saveSync\n */\n\n/**\n * @typedef {object} DepSubObject\n * @property {string} section\n * @property {string} title\n */\n\n/**\n * @typedef {object} DepObject\n * @property {DepSubObject} dependencies\n * @property {DepSubObject} devDependencies\n * @property {DepSubObject} peerDependencies\n */\n\n/** @type {DepObject} */\nconst deps = {\n  dependencies: {section: 'dep', title: 'Dependencies'},\n  devDependencies: {section: 'dev', title: 'Development Dependencies'},\n  peerDependencies: {section: 'peer', title: 'Peer Dependencies'},\n};\n\n/** @type {Array<string>} */\nconst depsKeys = Object.keys(deps);\n\n/** @type {Array<string>} */\nconst depsSections = depsKeys.map(function iteratee(key) {\n  return deps[key].section;\n});\n\n/**\n * @param {object} tableChars - Table options chars.\n * @param {string} key - Char key.\n * @returns {object} Table options chars.\n */\nconst charsIteratee = function charsIteratee(tableChars, key) {\n  tableChars[key] = '';\n\n  return tableChars;\n};\n\n/**\n * @returns {Table} The CLI table.\n */\nconst getTable = function getTable() {\n  const table = new Table({});\n\n  table.options.chars = Object.keys(table.options.chars).reduce(charsIteratee, {});\n\n  return table;\n};\n\n/**\n * @param {string} key - The section name.\n * @param {boolean} onlyChanged - Only changed option.\n * @returns {function(*): object} The bound result to JSON function.\n */\nconst createResultJSON = function createResultJSON(key, onlyChanged) {\n  const predicate = function predicate(result) {\n    return !onlyChanged || result.isChanged;\n  };\n\n  return function resultJSON(results) {\n    return {\n      [key]: results.filter(predicate),\n    };\n  };\n};\n\n/**\n * @param {string} message - Message in chalk colour.\n * @param {object} result - Package result.\n * @returns {Array<string>} - Row message array.\n */\nconst getRowFromTo = function getRowFromTo(message, result) {\n  return [message, result.name, 'from', chalk.yellow(result.before), 'to', chalk.yellow(result.after)];\n};\n\n/**\n * @param {string} message - Message in chalk colour.\n * @param {object} result - Package result.\n * @returns {Array<string>} - Row message array.\n */\nconst getRowAt = function getRowAt(message, result) {\n  return [message, result.name, 'at', chalk.yellow(result.before)];\n};\n\n/**\n * @param {object} result - Package result.\n * @returns {boolean} Indicates if the range is satisfied.\n */\nconst isRangeSatisfied = function isRangeSatisfied(result) {\n  return result.isUpdatable || result.isStar || result.isPegged;\n};\n\n/**\n * @param {boolean} onlyChanged - Only changed option.\n * @returns {function(object): Array<string>} - Row iteratee.\n */\nconst createRowIteratee = function createRowIteratee(onlyChanged) {\n  return function rowIteratee(result) {\n    if (result.isChanged) {\n      return getRowFromTo(chalk.green('Changed: '), result);\n    }\n\n    if (result.error) {\n      return [...getRowAt(chalk.red('Package not found: '), result), chalk.bold.red('?')];\n    }\n\n    if (!isRangeSatisfied(result)) {\n      return getRowFromTo(chalk.red('Requested range not satisfied by: '), result);\n    }\n\n    return onlyChanged ? null : getRowAt(chalk.blue('Kept: '), result);\n  };\n};\n\n/**\n * @param {Array<string>} a - Reference element.\n * @param {Array<string>} b - Compare element.\n * @returns {number} A -1 if a before b; 1 if a after b; 0 if they are equivalent.\n */\nconst sortByName = function sortByName(a, b) {\n  return a[1].localeCompare(b[1]);\n};\n\n/**\n * @param {string} caption - Section caption.\n * @param {boolean} onlyChanged - Only changed options.\n * @returns {function(Array<object>): [string, Table]} The array of chalked caption and CLI table.\n */\nconst createResultTable = function createResultTable(caption, onlyChanged) {\n  return function resultTable(results) {\n    const table = getTable();\n\n    if (results.length > 0) {\n      const tableRows = results.map(createRowIteratee(onlyChanged)).filter(Boolean);\n\n      table.push(...tableRows);\n      table.sort(sortByName);\n    } else {\n      table.push([chalk.gray('None found')]);\n    }\n\n    return [chalk.green.underline(`${caption}:`), table];\n  };\n};\n\n/**\n * @param {PackagePlus} packagePlus - The packagePlus object.\n * @returns {Promise<PackagePlus>} The package.json object.\n */\nconst loadNPM = function loadNPM(packagePlus) {\n  return new Promise(function executee(resolve, reject) {\n    npm.load({}, function callback(err, result) {\n      if (err) {\n        reject(err);\n      } else {\n        resolve(result);\n      }\n    });\n  }).then(function thenee() {\n    return packagePlus;\n  });\n};\n\n/**\n * @param {string} version - The package version.\n * @returns {boolean} Indicate if the version is pegged or not.\n */\nconst isVersionPegged = function isVersionPegged(version) {\n  try {\n    /* eslint-disable-next-line babel/new-cap */\n    const range = semver.Range(version);\n\n    return range.set.every(function predicate(comparators) {\n      return comparators.length === 1 && String(comparators[0].operator || '') === '';\n    });\n  } catch (err) {\n    /*\n     * semver.Range doesn't support all version specifications (like git\n     * references), so if it raises an error, assume the dep can be left\n     * untouched:\n     */\n    return true;\n  }\n};\n\n/**\n * @param {Array} latest - The latest result array.\n * @returns {Array} The latest result array.\n */\nconst assertLatestLength = function assertLatestLength(latest) {\n  if (latest.length !== 1) {\n    throw new Error(`expected 1 version key, got: ${latest}`);\n  }\n\n  return latest;\n};\n\n/**\n * Given a package name, lookup the semantic tags.\n *\n * @param {string} name - The module name.\n * @param {function(Error, {prefix: (undefined|string), tags: (undefined|object)}): *} callback - A function to call with the dist tags.\n */\nconst lookupDistTags = function lookupDistTags(name, callback) {\n  /* Need to require here, because NPM does all sorts of funky global attaching. */\n  /* eslint-disable-next-line global-require */\n  const view = require('npm/lib/view');\n\n  /* Call View directly to ensure the arguments actually work. */\n  view([name, 'dist-tags'], true, function cb(err, desc) {\n    if (err) {\n      callback(err, {});\n    } else {\n      const prefix = npm.config.get('save-prefix');\n      const latest = assertLatestLength(Object.keys(desc));\n      const tags = desc[latest]['dist-tags'];\n\n      callback(null, {prefix, tags});\n    }\n  });\n};\n\n/**\n * @param {string} existing - The existing package version from package.json file.\n * @param {string} version - The package version from update check.\n * @returns {boolean} Indicates if the package is updatable or not.\n */\nconst getIsUpdatable = function getIsUpdatable(existing, version) {\n  try {\n    /* eslint-disable-next-line babel/new-cap */\n    const range = semver.Range(existing);\n\n    return !semver.ltr(version, range);\n  } catch (e) {\n    return false;\n  }\n};\n\n/**\n * @param {{name: string, version: string}} pkg - The package details.\n * @param {object} flags - Ignore flags.\n * @returns {Promise<object>} A promise that resolves to an untouched object.\n */\nconst createUntouched = function createUntouched(pkg, flags) {\n  const {name, version} = pkg;\n\n  return Promise.resolve({\n    ...{\n      after: version,\n      before: version,\n      isChanged: false,\n      isUpdatable: false,\n      name,\n    },\n    ...flags,\n  });\n};\n\n/**\n * @param {string} version - The package version.\n * @returns {boolean} Indicates if it is star or not.\n */\nconst isVersionStar = function isVersionStar(version) {\n  return version === '*' || version === 'latest';\n};\n\n/**\n * @param {{names: Array<string>, section: object}} data - The names array and package.json section.\n * @param {{stars: boolean, pegged: boolean}} ignore - Ignore options.\n * @returns {{names: Array<string>, untouched: Array<Promise<object>>}} The filtered names and untouched objects.\n */\nconst reduceNamesAndUntouched = function reduceNamesAndUntouched({names, section}, {stars, pegged}) {\n  const predicate = function predicate(filterObject, name) {\n    const version = section[name];\n\n    if (stars && isVersionStar(version)) {\n      filterObject.untouched.push(createUntouched({name, version}, {isStar: true}));\n    } else if (pegged && isVersionPegged(version)) {\n      filterObject.untouched.push(createUntouched({name, version}, {isPegged: true}));\n    } else {\n      filterObject.names.push(name);\n    }\n\n    return filterObject;\n  };\n\n  return names.reduce(predicate, {names: [], untouched: []});\n};\n\n/**\n * @param {object} section - The section object.\n * @param {{stars: boolean, pegged: boolean}} ignore - Ignore options.\n * @returns {{names: Array<string>, untouched: Array<Promise<object>>}} The object of promise arrays.\n */\nconst getNamesAndUntouched = function getNamesAndUntouched(section, {stars, pegged}) {\n  const names = Object.keys(section);\n\n  if (stars || pegged) {\n    return reduceNamesAndUntouched({names, section}, {stars, pegged});\n  }\n\n  return {names, untouched: []};\n};\n\n/**\n * @param {object} section - A section object.\n * @returns {boolean} Is it a populated section object.\n */\nconst isSection = function isSection(section) {\n  return typeof section === 'object' && Boolean(section) && Object.keys(section).length > 0;\n};\n\n/**\n * @param {{version: *, isUpdatable: boolean, existing: string, updated: string}} params - Parameters to check.\n * @returns {boolean} - Has the version changed.\n */\nconst isVersionChanged = function isVersionChanged({version, isUpdatable, existing, updated}) {\n  return version !== null && isUpdatable && existing !== updated;\n};\n\n/**\n * @param {{section: object, name: string, data: object, existing: string}} params - The parameters.\n * @returns {{isUpdatable: boolean, before: string, isChanged: boolean, name: string, after: string}} The result.\n */\nconst updateDescriptorAndGetResult = function updateDescriptorAndGetResult({section, name, data, existing}) {\n  const version = data.tags.latest;\n  const isUpdatable = getIsUpdatable(existing, version);\n  const updated = data.prefix + version;\n  const isChanged = isVersionChanged({version, isUpdatable, existing, updated});\n\n  if (isChanged) {\n    /* Actually write to the package descriptor. */\n    section[name] = updated;\n  }\n\n  return {after: updated, before: existing, isChanged, isUpdatable, name};\n};\n\n/**\n * @param {{resolve: Function, section: object, name: string}} params - The parameters.\n * @returns {function(Error, {prefix: (undefined|string), tags: (undefined|object)})} The callback function.\n */\nconst createLookupDistTagsCallback = function createLookupDistTagsCallback({resolve, section, name}) {\n  return function lookupDistTagsCallback(error, data) {\n    const existing = section[name];\n\n    if (error) {\n      resolve({after: existing, before: existing, error, isChanged: false, isUpdatable: false, name});\n    } else {\n      resolve(updateDescriptorAndGetResult({section, name, data, existing}));\n    }\n  };\n};\n\n/**\n * CreateDependenciesLookup.\n *\n * @param {object} section - The package.json section object.\n * @param {{stars: boolean, pegged: boolean}} ignore - Ignore options.\n * @returns {Array<Promise<object>>} An array of the promised objects.\n */\nconst dependenciesLookup = function dependenciesLookup(section, ignore) {\n  /* See if any dependencies of this type exist. */\n  if (isSection(section) === false) {\n    return [];\n  }\n\n  /* Loop through and map the \"lookup latest\" to promises. */\n  const {names, untouched} = getNamesAndUntouched(section, ignore);\n\n  const mapNameToLatest = function mapNameToLatest(name) {\n    return new Promise(function executee(resolve) {\n      lookupDistTags(name, createLookupDistTagsCallback({resolve, section, name}));\n    });\n  };\n\n  return names.map(mapNameToLatest).concat(untouched);\n};\n\n/**\n * @param {function(Array<object>): TotalsArray} fn - The function to execute on resolve.\n * @returns {function(Promise<object>): (Promise<TotalsArray>)} - Promise of result lengths.\n */\nconst createMapThen = function createMapThen(fn) {\n  return function mapThen(promise) {\n    return promise.then(fn);\n  };\n};\n\n/**\n * Total and Changed.\n *\n * @typedef {Array<number>} TotalsArray\n */\n\n/**\n * @param {object} results - The results object.\n * @returns {TotalsArray} The array of dependency counts.\n */\nconst getDepCounts = function getDepCounts(results) {\n  /** @type {number} */\n  const changedDeps = results.filter(function iteratee({isChanged}) {\n    return isChanged;\n  }).length;\n\n  /** @type {number} */\n  const totalDeps = results.length;\n\n  return [totalDeps, changedDeps];\n};\n\n/**\n * @typedef {object} DepPromises\n * @property {Array<Promise<object>>} lookups\n * @property {Array<Promise<object>>} promises\n */\n\n/**\n * @param {PackagePlus} packagePlus - The packagePlus object.\n * @param {{sections: Array<string>, json: boolean, onlyChanged: boolean, ignoreStars: boolean, ignorePegged: boolean}} options - The user options.\n * @returns {DepPromises} The object of promise arrays.\n */\nconst getDepPromises = function getDepPromises(packagePlus, options) {\n  const {data} = packagePlus;\n  const {sections, json, onlyChanged, ignoreStars, ignorePegged} = options;\n  /**\n   * @param {DepPromises} depPromises - The object of promise arrays.\n   * @param {string} key - The deps key.\n   * @returns {DepPromises} The object of promise arrays.\n   */\n  const iteratee = function iteratee(depPromises, key) {\n    const {section, title} = deps[key];\n\n    if (sections.indexOf(section) !== -1) {\n      const depLookup = Promise.all(dependenciesLookup(data[key], {stars: ignoreStars, pegged: ignorePegged}));\n      depPromises.lookups.push(depLookup);\n\n      const create = json ? createResultJSON(key, onlyChanged) : createResultTable(title, onlyChanged);\n      depPromises.promises.push(depLookup.then(create));\n    }\n\n    return depPromises;\n  };\n\n  return depsKeys.reduce(iteratee, {lookups: [], promises: []});\n};\n\n/**\n *\n * @param {object} options - The user options.\n * @returns {function(PackagePlus): PackagePlus} The packagePlus object.\n */\nconst createFoundPackageJsonLogger = function createFoundPackageJsonLogger(options) {\n  const {json, quiet} = options;\n\n  return function foundPackageJsonLogger(packagePlus) {\n    if (packagePlus && !json && !quiet) {\n      process.stdout.write(`Found: ${packagePlus.filename}\\n`);\n    }\n\n    return packagePlus;\n  };\n};\n\n/**\n * @param {object} results - The results object.\n */\nconst printEach = function printEach(results) {\n  results.map(String).forEach(function innerIteratee(result) {\n    process.stdout.write(`${result}\\n`);\n  });\n};\n\n/**\n * @param {DepPromises} depPromises - The object of promise arrays.\n * @param {object} options - The user options.\n * @returns {function(Array): DepPromises} The depPromises object.\n */\nconst createPrinter = function createPrinter(depPromises, options) {\n  const {json, quiet} = options;\n\n  return function printer(depResults) {\n    if (!quiet) {\n      if (json) {\n        process.stdout.write(`${JSON.stringify(Object.assign.apply(null, [{}].concat(depResults)), null, 2)}\\n`);\n      } else {\n        depResults.forEach(printEach);\n      }\n    }\n\n    return depPromises;\n  };\n};\n\n/**\n * @typedef {object} PlusPromises\n * @property {PackagePlus} packagePlus\n * @property {DepPromises} depPromises\n */\n\n/**\n * @param {object} options - The user options.\n * @returns {function(PackagePlus): Promise<PlusPromises>} The packagePlus and depPromises.\n */\nconst createPromiseAllPromises = function createPromiseAllPromises(options) {\n  return function promiseAllPromises(packagePlus) {\n    const depPromises = getDepPromises(packagePlus, options);\n\n    /* Wait for all of them to resolve. */\n    return Promise.all(depPromises.promises)\n      .then(createPrinter(depPromises, options))\n      .then(function thenee() {\n        return {packagePlus, depPromises};\n      });\n  };\n};\n\n/**\n * @param {DepPromises} depPromises - The depPromises object.\n * @returns {Promise<Array<TotalsArray>>} The promised array of counts.\n */\nconst getPromiseCounts = function getPromiseCounts(depPromises) {\n  return Promise.all(depPromises.lookups.map(createMapThen(getDepCounts)));\n};\n\n/**\n * @typedef {object} TotalsObject\n * @property {number} changed\n * @property {number} total\n */\n\n/**\n * @param {TotalsObject} acc - Totals accumulator.\n * @param {TotalsArray} category - Category counts.\n * @returns {TotalsObject} The totals accumulator.\n */\nconst countIteratee = function countIteratee(acc, category) {\n  acc.changed += category[1];\n  acc.total += category[0];\n\n  return acc;\n};\n\n/**\n * @param {TotalsObject} sums - The sums object.\n * @param {object} options - The user options.\n */\nconst printSums = function printSums(sums, options) {\n  if (!options.json && !options.quiet) {\n    process.stdout.write(`\\n${sums.changed} updated out of ${sums.total} total dependencies.\\n\\n`);\n  }\n};\n\n/**\n * @param {object} options - The user options.\n * @returns {function(PlusPromises): Promise<(TotalsObject|PackagePlus)>} - The final results.\n */\nconst createCountAndSave = function createCountAndSave(options) {\n  return function countAndSave({packagePlus, depPromises}) {\n    return getPromiseCounts(depPromises).then(function thenee(counts) {\n      /** @type {TotalsObject} */\n      const sums = counts.reduce(countIteratee, {changed: 0, total: 0});\n\n      printSums(sums, options);\n\n      if (options.check) {\n        return sums;\n      }\n\n      if (!options.dryRun) {\n        /* Write back the package.json. */\n        packagePlus.saveSync();\n      }\n\n      return packagePlus;\n    });\n  };\n};\n\n/**\n * @typedef {object} UserOptions\n * @property {boolean} color - Default true.\n * @property {boolean} json - Default false.\n * @property {boolean} dryRun - Default true.\n * @property {boolean} update - Default false.\n * @property {boolean} onlyChanged - Default false.\n * @property {boolean} check - Default false.\n * @property {Array<string>} sections - Default ['dep','dev','peer].\n * @property {boolean} quiet - Default false.\n * @property {boolean} ignorePegged - Default false.\n * @property {boolean} ignoreStars - Default false.\n */\n\n/**\n * @returns {UserOptions} - The default values.\n */\nconst defaultOptions = function defaultOptions() {\n  return {\n    color: true,\n    json: false,\n    dryRun: true,\n    update: false,\n    onlyChanged: false,\n    check: false,\n    sections: depsSections,\n    quiet: false,\n    ignorePegged: false,\n    ignoreStars: false,\n  };\n};\n\n/**\n * @param {Array} optionValue - The user option value.\n * @param {Array} defaultValue - The default value.\n * @returns {Array} The normalize value.\n */\nconst normalizeSections = function normalizeSections(optionValue, defaultValue) {\n  return optionValue.reduce(function iteratee(acc, item) {\n    const string = String(item);\n\n    if (acc.indexOf(string) === -1 && defaultValue.indexOf(string) !== -1) {\n      acc.push(string);\n    }\n\n    return acc;\n  }, []);\n};\n\n/**\n * @param {UserOptions} options - The user options.\n * @returns {UserOptions} The normalized options.\n */\nconst normalizeDryRun = function normalizeDryRun(options) {\n  if (options.update) {\n    options.dryRun = false;\n  }\n\n  if (options.dryRun || !options.update || options.check) {\n    options.dryRun = true;\n    options.update = false;\n  }\n\n  return options;\n};\n\n/**\n * @param {UserOptions} options - The user options.\n * @returns {UserOptions} The normalized options.\n */\nconst normalizeColor = function normalizeColor(options) {\n  if (options.json) {\n    options.color = false;\n  }\n\n  return options;\n};\n\n/**\n * @param {UserOptions} opts - The default options.\n * @param {UserOptions} options - The user options.\n * @returns {UserOptions} The normalized options.\n */\nconst normalizeValues = function normalizeValues(opts, options) {\n  Object.keys(opts).forEach(function iteratee(key) {\n    const defaultValue = opts[key];\n    const optionValue = options[key];\n\n    if (key === 'sections') {\n      if (Array.isArray(optionValue)) {\n        opts[key] = normalizeSections(optionValue, defaultValue);\n      }\n    } else if (typeof optionValue === 'boolean') {\n      opts[key] = optionValue;\n    }\n  });\n\n  normalizeDryRun(opts);\n\n  return normalizeColor(opts);\n};\n\n/**\n * @param {UserOptions} options - The user options.\n * @returns {UserOptions} Defaults merged with user options.\n */\nconst normalizeOptions = function normalizeOptions(options) {\n  const opts = defaultOptions();\n\n  if (typeof options === 'object' && options) {\n    normalizeValues(opts, options);\n  }\n\n  return opts;\n};\n\n/**\n * The main entry point.\n *\n * @param {string} dir - The working directory.\n * @param {object} [options=UserOptions] - The user options.\n * @returns {Promise<(TotalsObject|PackagePlus)>} The promise of TotalsObject or PackagePlus.\n */\nconst salita = function salita(dir, options) {\n  if (typeof dir !== 'string') {\n    throw new TypeError(`Path must be a string. Received ${dir}`);\n  }\n\n  const opts = normalizeOptions(options);\n  chalk.enabled = opts.color && !opts.json;\n  const filename = path.join(dir, 'package.json');\n\n  return Promise.resolve(jsonFilePlus(filename))\n    .then(loadNPM)\n    .then(createFoundPackageJsonLogger(opts))\n    .then(createPromiseAllPromises(opts))\n    .then(createCountAndSave(opts));\n};\n\nObject.defineProperty(salita, 'sections', {\n  enumerable: true,\n  get() {\n    return depsSections.slice();\n  },\n});\n\nexport default salita;\n"]}